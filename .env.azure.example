# =============================================================================
# de_template: Azure Blob Storage (ADLS Gen2) Configuration Example
# =============================================================================
# Azure Blob Storage via S3-compatibility layer (requires enabling it on the
# storage account). For production: use Managed Identity + Azure Key Vault.
# See docs/06_secrets_and_auth.md for Azure authentication patterns.
# NOTE: Native abfs:// support for Iceberg requires additional Hadoop Azure jars.
# The S3-compat approach shown here is simpler for initial setup.
# =============================================================================

BROKER=kafka
CATALOG=hadoop
STORAGE=azure            # <-- use this; no storage.minio.yml overlay is loaded
MODE=batch

TOPIC=taxi.raw_trips
DLQ_TOPIC=taxi.raw_trips.dlq
DLQ_MAX=0

DATA_PATH=/data/yellow_tripdata_2024-01.parquet
MAX_EVENTS=0

# Azure Blob S3-compatibility endpoint (account-specific)
WAREHOUSE=s3a://YOUR-CONTAINER/warehouse/
S3_ENDPOINT=https://YOUR-ACCOUNT.blob.core.windows.net
S3_USE_SSL=true
S3_PATH_STYLE=false

DUCKDB_S3_ENDPOINT=YOUR-ACCOUNT.blob.core.windows.net
DUCKDB_S3_USE_SSL=true

# Storage account key (prefer Managed Identity for Azure workloads)
# For Managed Identity: leave blank and configure MSI on the VM/container
AWS_ACCESS_KEY_ID=YOUR-ACCOUNT-NAME
AWS_SECRET_ACCESS_KEY=YOUR-STORAGE-KEY
AWS_REGION=eastus

PROJECT=de_pipeline
